{"version":3,"file":"signals-transform.mjs","sources":["../src/index.ts"],"sourcesContent":["import {\n\ttypes as BabelTypes,\n\ttemplate as BabelTemplate,\n\tPluginObj,\n\tPluginPass,\n\tNodePath,\n\ttemplate,\n} from \"@babel/core\";\nimport { isModule, addNamed } from \"@babel/helper-module-imports\";\nimport type { Scope, VisitNodeObject } from \"@babel/traverse\";\nimport debug from \"debug\";\n\ninterface PluginArgs {\n\ttypes: typeof BabelTypes;\n\ttemplate: typeof BabelTemplate;\n}\n\nconst optOutCommentIdentifier = /(^|\\s)@no(Use|Track)Signals(\\s|$)/;\nconst optInCommentIdentifier = /(^|\\s)@(use|track)Signals(\\s|$)/;\nconst dataNamespace = \"@preact/signals-react-transform\";\nconst defaultImportSource = \"@preact/signals-react/runtime\";\nconst importName = \"useSignals\";\nconst getHookIdentifier = \"getHookIdentifier\";\nconst maybeUsesSignal = \"maybeUsesSignal\";\nconst containsJSX = \"containsJSX\";\nconst alreadyTransformed = \"alreadyTransformed\";\nconst jsxIdentifiers = \"jsxIdentifiers\";\nconst jsxObjects = \"jsxObjects\";\n\nconst UNMANAGED = \"0\";\nconst MANAGED_COMPONENT = \"1\";\nconst MANAGED_HOOK = \"2\";\ntype HookUsage =\n\t| typeof UNMANAGED\n\t| typeof MANAGED_COMPONENT\n\t| typeof MANAGED_HOOK;\n\nconst logger = {\n\ttransformed: debug(\"signals:react-transform:transformed\"),\n\tskipped: debug(\"signals:react-transform:skipped\"),\n};\n\nconst get = (pass: PluginPass, name: any) =>\n\tpass.get(`${dataNamespace}/${name}`);\nconst set = (pass: PluginPass, name: string, v: any) =>\n\tpass.set(`${dataNamespace}/${name}`, v);\n\ninterface DataContainer {\n\tgetData(name: string): any;\n\tsetData(name: string, value: any): void;\n}\nconst setData = (node: DataContainer, name: string, value: any) =>\n\tnode.setData(`${dataNamespace}/${name}`, value);\nconst getData = (node: DataContainer, name: string) =>\n\tnode.getData(`${dataNamespace}/${name}`);\n\nfunction getComponentFunctionDeclaration(\n\tpath: NodePath,\n\tfilename: string | undefined,\n\tprev?: Scope\n): Scope | null {\n\tconst functionScope = path.scope.getFunctionParent();\n\n\tif (functionScope) {\n\t\tconst parent = functionScope.path.parent;\n\t\tlet functionName = getFunctionName(functionScope.path as any);\n\t\tif (functionName === DefaultExportSymbol) {\n\t\t\tfunctionName = filename || null;\n\t\t}\n\t\tif (isComponentFunction(functionScope.path as any, functionName)) {\n\t\t\treturn functionScope;\n\t\t} else if (\n\t\t\tparent.type === \"CallExpression\" &&\n\t\t\tparent.callee.type === \"Identifier\" &&\n\t\t\tparent.callee.name.startsWith(\"use\") &&\n\t\t\tparent.callee.name[3] === parent.callee.name[3].toUpperCase()\n\t\t) {\n\t\t\treturn null;\n\t\t}\n\t\treturn getComponentFunctionDeclaration(\n\t\t\tfunctionScope.parent.path,\n\t\t\tfilename,\n\t\t\tfunctionScope\n\t\t);\n\t} else {\n\t\treturn prev || null;\n\t}\n}\n\nfunction setOnFunctionScope(\n\tpath: NodePath,\n\tkey: string,\n\tvalue: any,\n\tfilename: string | undefined\n) {\n\tconst functionScope = getComponentFunctionDeclaration(path, filename);\n\tif (functionScope) {\n\t\tsetData(functionScope, key, value);\n\t}\n}\n\ntype FunctionLike =\n\t| BabelTypes.ArrowFunctionExpression\n\t| BabelTypes.FunctionExpression\n\t| BabelTypes.FunctionDeclaration\n\t| BabelTypes.ObjectMethod;\n\n/**\n * Simple \"best effort\" to get the base name of a file path. Not fool proof but\n * works in browsers and servers. Good enough for our purposes.\n */\nfunction basename(filename: string | undefined): string | undefined {\n\treturn filename?.split(/[\\\\/]/).pop();\n}\n\nconst DefaultExportSymbol = Symbol(\"DefaultExportSymbol\");\n\nfunction getObjectPropertyKey(\n\tnode: BabelTypes.ObjectProperty | BabelTypes.ObjectMethod\n): string | null {\n\tif (node.key.type === \"Identifier\") {\n\t\treturn node.key.name;\n\t} else if (node.key.type === \"StringLiteral\") {\n\t\treturn node.key.value;\n\t}\n\n\treturn null;\n}\n\n/**\n * If the function node has a name (i.e. is a function declaration with a\n * name), return that. Else return null.\n */\nfunction getFunctionNodeName(node: FunctionLike): string | null {\n\tif (\n\t\t(node.type === \"FunctionDeclaration\" ||\n\t\t\tnode.type === \"FunctionExpression\") &&\n\t\tnode.id\n\t) {\n\t\treturn node.id.name;\n\t} else if (node.type === \"ObjectMethod\") {\n\t\treturn getObjectPropertyKey(node);\n\t}\n\n\treturn null;\n}\n\n/**\n * Given a function path's parent path, determine the \"name\" associated with the\n * function. If the function is an inline default export (e.g. `export default\n * () => {}`), returns a symbol indicating it is a default export. If the\n * function is an anonymous function wrapped in higher order functions (e.g.\n * memo(() => {})) we'll climb through the higher order functions to find the\n * name of the variable that the function is assigned to, if any. Other cases\n * handled too (see implementation). Else returns null.\n */\nfunction getFunctionNameFromParent(\n\tparentPath: NodePath<BabelTypes.Node>\n): string | null | typeof DefaultExportSymbol {\n\tif (\n\t\tparentPath.node.type === \"VariableDeclarator\" &&\n\t\tparentPath.node.id.type === \"Identifier\"\n\t) {\n\t\treturn parentPath.node.id.name;\n\t} else if (parentPath.node.type === \"AssignmentExpression\") {\n\t\tconst left = parentPath.node.left;\n\t\tif (left.type === \"Identifier\") {\n\t\t\treturn left.name;\n\t\t} else if (left.type === \"MemberExpression\") {\n\t\t\tlet property = left.property;\n\t\t\twhile (property.type === \"MemberExpression\") {\n\t\t\t\tproperty = property.property;\n\t\t\t}\n\n\t\t\tif (property.type === \"Identifier\") {\n\t\t\t\treturn property.name;\n\t\t\t} else if (property.type === \"StringLiteral\") {\n\t\t\t\treturn property.value;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t} else if (parentPath.node.type === \"ObjectProperty\") {\n\t\treturn getObjectPropertyKey(parentPath.node);\n\t} else if (parentPath.node.type === \"ExportDefaultDeclaration\") {\n\t\treturn DefaultExportSymbol;\n\t} else if (\n\t\tparentPath.node.type === \"CallExpression\" &&\n\t\tparentPath.parentPath != null\n\t) {\n\t\t// If our parent is a Call Expression, then this function expression is\n\t\t// wrapped in some higher order functions. Recurse through the higher order\n\t\t// functions to determine if this expression is assigned to a name we can\n\t\t// use as the function name\n\t\treturn getFunctionNameFromParent(parentPath.parentPath);\n\t} else {\n\t\treturn null;\n\t}\n}\n\n/* Determine the name of a function */\nfunction getFunctionName(\n\tpath: NodePath<FunctionLike>\n): string | typeof DefaultExportSymbol | null {\n\tlet nodeName = getFunctionNodeName(path.node);\n\tif (nodeName) {\n\t\treturn nodeName;\n\t}\n\n\treturn getFunctionNameFromParent(path.parentPath);\n}\n\nfunction isComponentName(name: string | null): boolean {\n\treturn name?.match(/^[A-Z]/) != null;\n}\nfunction isCustomHookName(name: string | null): boolean {\n\treturn name?.match(/^use[A-Z]/) != null;\n}\n\nfunction hasLeadingComment(path: NodePath, comment: RegExp): boolean {\n\tconst comments = path.node.leadingComments;\n\treturn comments?.some(c => c.value.match(comment) !== null) ?? false;\n}\n\nfunction hasLeadingOptInComment(path: NodePath) {\n\treturn hasLeadingComment(path, optInCommentIdentifier);\n}\n\nfunction hasLeadingOptOutComment(path: NodePath) {\n\treturn hasLeadingComment(path, optOutCommentIdentifier);\n}\n\nfunction isOptedIntoSignalTracking(path: NodePath | null): boolean {\n\tif (!path) return false;\n\n\tswitch (path.node.type) {\n\t\tcase \"ArrowFunctionExpression\":\n\t\tcase \"FunctionExpression\":\n\t\tcase \"FunctionDeclaration\":\n\t\tcase \"ObjectMethod\":\n\t\tcase \"ObjectExpression\":\n\t\tcase \"VariableDeclarator\":\n\t\tcase \"VariableDeclaration\":\n\t\tcase \"AssignmentExpression\":\n\t\tcase \"CallExpression\":\n\t\t\treturn (\n\t\t\t\thasLeadingOptInComment(path) ||\n\t\t\t\tisOptedIntoSignalTracking(path.parentPath)\n\t\t\t);\n\t\tcase \"ExportDefaultDeclaration\":\n\t\tcase \"ExportNamedDeclaration\":\n\t\tcase \"ObjectProperty\":\n\t\tcase \"ExpressionStatement\":\n\t\t\treturn hasLeadingOptInComment(path);\n\t\tdefault:\n\t\t\treturn false;\n\t}\n}\n\nfunction isOptedOutOfSignalTracking(path: NodePath | null): boolean {\n\tif (!path) return false;\n\n\tswitch (path.node.type) {\n\t\tcase \"ArrowFunctionExpression\":\n\t\tcase \"FunctionExpression\":\n\t\tcase \"FunctionDeclaration\":\n\t\tcase \"ObjectMethod\":\n\t\tcase \"ObjectExpression\":\n\t\tcase \"VariableDeclarator\":\n\t\tcase \"VariableDeclaration\":\n\t\tcase \"AssignmentExpression\":\n\t\tcase \"CallExpression\":\n\t\t\treturn (\n\t\t\t\thasLeadingOptOutComment(path) ||\n\t\t\t\tisOptedOutOfSignalTracking(path.parentPath)\n\t\t\t);\n\t\tcase \"ExportDefaultDeclaration\":\n\t\tcase \"ExportNamedDeclaration\":\n\t\tcase \"ObjectProperty\":\n\t\tcase \"ExpressionStatement\":\n\t\t\treturn hasLeadingOptOutComment(path);\n\t\tdefault:\n\t\t\treturn false;\n\t}\n}\n\nfunction isComponentFunction(\n\tpath: NodePath<FunctionLike>,\n\tfunctionName: string | null\n): boolean {\n\treturn (\n\t\tgetData(path.scope, containsJSX) === true && // Function contains JSX\n\t\tisComponentName(functionName) // Function name indicates it's a component\n\t);\n}\n\nfunction shouldTransform(\n\tpath: NodePath<FunctionLike>,\n\tfunctionName: string | null,\n\toptions: PluginOptions\n): boolean {\n\t// Opt-out takes first precedence\n\tif (isOptedOutOfSignalTracking(path)) return false;\n\t// Opt-in opts in to transformation regardless of mode\n\tif (isOptedIntoSignalTracking(path)) return true;\n\n\tif (options.mode === \"all\") {\n\t\treturn isComponentFunction(path, functionName);\n\t}\n\n\tif (options.mode == null || options.mode === \"auto\") {\n\t\treturn (\n\t\t\tgetData(path.scope, maybeUsesSignal) === true && // Function appears to use signals;\n\t\t\t(isComponentFunction(path, functionName) ||\n\t\t\t\tisCustomHookName(functionName))\n\t\t);\n\t}\n\n\treturn false;\n}\n\nfunction isValueMemberExpression(\n\tpath: NodePath<BabelTypes.MemberExpression>\n): boolean {\n\treturn (\n\t\t(path.node.property.type === \"Identifier\" &&\n\t\t\tpath.node.property.name === \"value\") ||\n\t\t(path.node.property.type === \"StringLiteral\" &&\n\t\t\tpath.node.property.value === \"value\")\n\t);\n}\n\nfunction isJSXAlternativeCall(\n\tpath: NodePath<BabelTypes.CallExpression>,\n\tstate: PluginPass\n): boolean {\n\tconst jsxIdentifierSet = get(state, jsxIdentifiers) as Set<string>;\n\tconst jsxObjectMap = get(state, jsxObjects) as Map<string, string[]>;\n\tconst callee = path.get(\"callee\");\n\n\t// Check direct function calls like _jsx(\"div\", props) or createElement(\"div\", props)\n\tif (callee.isIdentifier()) {\n\t\treturn jsxIdentifierSet?.has(callee.node.name) ?? false;\n\t}\n\n\t// Check member expression calls like React.createElement(\"div\", props) or jsxRuntime.jsx(\"div\", props)\n\tif (callee.isMemberExpression()) {\n\t\tconst object = callee.get(\"object\");\n\t\tconst property = callee.get(\"property\");\n\n\t\tif (object.isIdentifier() && property.isIdentifier()) {\n\t\t\tconst objectName = object.node.name;\n\t\t\tconst methodName = property.node.name;\n\t\t\tconst allowedMethods = jsxObjectMap?.get(objectName);\n\t\t\treturn allowedMethods?.includes(methodName) ?? false;\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction isSignalCall(path: NodePath<BabelTypes.CallExpression>): boolean {\n\tconst callee = path.get(\"callee\");\n\n\t// Check direct function calls like signal(), computed(), useSignal(), useComputed()\n\tif (callee.isIdentifier()) {\n\t\tconst name = callee.node.name;\n\t\treturn (\n\t\t\tname === \"signal\" ||\n\t\t\tname === \"computed\" ||\n\t\t\tname === \"useSignal\" ||\n\t\t\tname === \"useComputed\"\n\t\t);\n\t}\n\n\treturn false;\n}\n\nfunction getVariableNameFromDeclarator(\n\tpath: NodePath<BabelTypes.CallExpression>\n): string | null {\n\t// Walk up the AST to find a variable declarator\n\tlet currentPath: NodePath | null = path;\n\twhile (currentPath) {\n\t\tif (\n\t\t\tcurrentPath.isVariableDeclarator() &&\n\t\t\tcurrentPath.node.id.type === \"Identifier\"\n\t\t) {\n\t\t\treturn currentPath.node.id.name;\n\t\t}\n\t\tcurrentPath = currentPath.parentPath;\n\t}\n\treturn null;\n}\n\nfunction hasNameInOptions(\n\tt: typeof BabelTypes,\n\targs: NodePath<\n\t\t| BabelTypes.Expression\n\t\t| BabelTypes.SpreadElement\n\t\t| BabelTypes.JSXNamespacedName\n\t\t| BabelTypes.ArgumentPlaceholder\n\t>[]\n): boolean {\n\t// Check if there's a second argument with a name property\n\tif (args.length >= 2) {\n\t\tconst optionsArg = args[1];\n\t\tif (optionsArg.isObjectExpression()) {\n\t\t\treturn optionsArg.node.properties.some(prop => {\n\t\t\t\tif (t.isObjectProperty(prop) && !prop.computed) {\n\t\t\t\t\tif (t.isIdentifier(prop.key, { name: \"name\" })) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tif (t.isStringLiteral(prop.key) && prop.key.value === \"name\") {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction injectSignalName(\n\tt: typeof BabelTypes,\n\tpath: NodePath<BabelTypes.CallExpression>,\n\tvariableName: string,\n\tfilename: string | undefined\n): void {\n\tconst args = path.get(\"arguments\");\n\n\t// Create enhanced name with filename and line number\n\tlet nameValue = variableName;\n\tif (filename) {\n\t\tconst baseName = basename(filename);\n\t\tconst lineNumber = path.node.loc?.start.line;\n\t\tif (baseName && lineNumber) {\n\t\t\tnameValue = `${variableName} (${baseName}:${lineNumber})`;\n\t\t}\n\t}\n\n\tconst name = t.stringLiteral(nameValue);\n\n\tif (args.length === 0) {\n\t\t// No arguments, add both value and options\n\t\tconst nameOption = t.objectExpression([\n\t\t\tt.objectProperty(t.identifier(\"name\"), name),\n\t\t]);\n\t\tpath.node.arguments.push(t.identifier(\"undefined\"), nameOption);\n\t} else if (args.length === 1) {\n\t\t// One argument (value), add options object\n\t\tconst nameOption = t.objectExpression([\n\t\t\tt.objectProperty(t.identifier(\"name\"), name),\n\t\t]);\n\t\tpath.node.arguments.push(nameOption);\n\t} else if (args.length >= 2) {\n\t\t// Two or more arguments, modify existing options object\n\t\tconst optionsArg = args[1];\n\t\tif (optionsArg.isObjectExpression()) {\n\t\t\t// Add name property to existing options object\n\t\t\toptionsArg.node.properties.push(\n\t\t\t\tt.objectProperty(t.identifier(\"name\"), name)\n\t\t\t);\n\t\t} else {\n\t\t\t// Replace second argument with options object containing name\n\t\t\tconst nameOption = t.objectExpression([\n\t\t\t\tt.objectProperty(t.identifier(\"name\"), name),\n\t\t\t]);\n\t\t\targs[1].replaceWith(nameOption);\n\t\t}\n\t}\n}\n\nfunction hasValuePropertyInPattern(pattern: BabelTypes.ObjectPattern): boolean {\n\tfor (const property of pattern.properties) {\n\t\tif (BabelTypes.isObjectProperty(property)) {\n\t\t\tconst key = property.key;\n\n\t\t\tif (BabelTypes.isIdentifier(key, { name: \"value\" })) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nconst tryCatchTemplate = template.statements`var STORE_IDENTIFIER = HOOK_IDENTIFIER(HOOK_USAGE);\ntry {\n\tBODY\n} finally {\n\tSTORE_IDENTIFIER.f();\n}`;\n\nconst debugTryCatchTemplate = template.statements(\n\t`var STORE_IDENTIFIER = HOOK_IDENTIFIER(HOOK_USAGE);\ntry {\n\tif (window.__PREACT_SIGNALS_DEVTOOLS__) {\n\t\twindow.__PREACT_SIGNALS_DEVTOOLS__.enterComponent(\n\t\t\tCOMPONENT_NAME\n\t\t);\n\t}\n\tBODY\n} finally {\n\tSTORE_IDENTIFIER.f();\n\tif (window.__PREACT_SIGNALS_DEVTOOLS__) {\n\t\twindow.__PREACT_SIGNALS_DEVTOOLS__.exitComponent();\n\t}\n}`,\n\t{\n\t\tplaceholderWhitelist: new Set([\n\t\t\t\"STORE_IDENTIFIER\",\n\t\t\t\"HOOK_USAGE\",\n\t\t\t\"HOOK_IDENTIFIER\",\n\t\t\t\"BODY\",\n\t\t\t\"COMPONENT_NAME\",\n\t\t\t\"STORE_IDENTIFIER\",\n\t\t]),\n\t\tplaceholderPattern: false,\n\t}\n);\n\nfunction wrapInTryFinally(\n\tt: typeof BabelTypes,\n\tpath: NodePath<FunctionLike>,\n\tstate: PluginPass,\n\thookUsage: HookUsage,\n\tcomponentName: string,\n\tisDebug: boolean\n): BabelTypes.BlockStatement {\n\tconst stopTrackingIdentifier = path.scope.generateUidIdentifier(\"effect\");\n\n\tif (isDebug) {\n\t\tconst statements = debugTryCatchTemplate({\n\t\t\tCOMPONENT_NAME: t.stringLiteral(componentName),\n\t\t\tSTORE_IDENTIFIER: stopTrackingIdentifier,\n\t\t\tHOOK_IDENTIFIER: get(state, getHookIdentifier)(),\n\t\t\tHOOK_USAGE: hookUsage,\n\t\t\tBODY: t.isBlockStatement(path.node.body)\n\t\t\t\t? path.node.body.body\n\t\t\t\t: t.returnStatement(path.node.body),\n\t\t});\n\t\treturn t.blockStatement(statements);\n\t} else {\n\t\tconst statements = tryCatchTemplate({\n\t\t\tSTORE_IDENTIFIER: stopTrackingIdentifier,\n\t\t\tHOOK_IDENTIFIER: get(state, getHookIdentifier)(),\n\t\t\tHOOK_USAGE: hookUsage,\n\t\t\tBODY: t.isBlockStatement(path.node.body)\n\t\t\t\t? path.node.body.body\n\t\t\t\t: t.returnStatement(path.node.body),\n\t\t});\n\t\treturn t.blockStatement(statements);\n\t}\n}\n\nfunction prependUseSignals<T extends FunctionLike>(\n\tt: typeof BabelTypes,\n\tpath: NodePath<T>,\n\tstate: PluginPass\n): BabelTypes.BlockStatement {\n\tconst body = t.blockStatement([\n\t\tt.expressionStatement(\n\t\t\tt.callExpression(get(state, getHookIdentifier)(), [])\n\t\t),\n\t]);\n\tif (t.isBlockStatement(path.node.body)) {\n\t\t// TODO: Is it okay to elide the block statement here?\n\t\tbody.body.push(...path.node.body.body);\n\t} else {\n\t\tbody.body.push(t.returnStatement(path.node.body));\n\t}\n\n\treturn body;\n}\n\nfunction transformFunction(\n\tt: typeof BabelTypes,\n\toptions: PluginOptions,\n\tpath: NodePath<FunctionLike>,\n\tfunctionName: string | null,\n\tstate: PluginPass,\n\tfilename: string\n) {\n\tconst isHook = isCustomHookName(functionName);\n\tconst isComponent = isComponentName(functionName);\n\tconst hookUsage = options.experimental?.noTryFinally\n\t\t? UNMANAGED\n\t\t: isHook\n\t\t\t? MANAGED_HOOK\n\t\t\t: isComponent\n\t\t\t\t? MANAGED_COMPONENT\n\t\t\t\t: UNMANAGED;\n\n\tlet newBody: BabelTypes.BlockStatement;\n\tif (hookUsage !== UNMANAGED) {\n\t\tnewBody = wrapInTryFinally(\n\t\t\tt,\n\t\t\tpath,\n\t\t\tstate,\n\t\t\thookUsage,\n\t\t\t`${functionName || \"Unknown\"}:${basename(filename)}`,\n\t\t\tisComponent && !!options.experimental?.debug\n\t\t);\n\t} else {\n\t\tnewBody = prependUseSignals(t, path, state);\n\t}\n\n\tsetData(path, alreadyTransformed, true);\n\tpath.get(\"body\").replaceWith(newBody);\n}\n\nfunction createImportLazily(\n\ttypes: typeof BabelTypes,\n\tpass: PluginPass,\n\tpath: NodePath<BabelTypes.Program>,\n\timportName: string,\n\tsource: string\n): () => BabelTypes.Identifier {\n\treturn () => {\n\t\tif (isModule(path)) {\n\t\t\tlet reference: BabelTypes.Identifier = get(pass, `imports/${importName}`);\n\t\t\tif (reference) return types.cloneNode(reference);\n\t\t\treference = addNamed(path, importName, source, {\n\t\t\t\timportedInterop: \"uncompiled\",\n\t\t\t\timportPosition: \"after\",\n\t\t\t});\n\t\t\tset(pass, `imports/${importName}`, reference);\n\n\t\t\t/** Helper function to determine if an import declaration's specifier matches the given importName  */\n\t\t\tconst matchesImportName = (\n\t\t\t\ts: BabelTypes.ImportDeclaration[\"specifiers\"][0]\n\t\t\t) => {\n\t\t\t\tif (s.type !== \"ImportSpecifier\") return false;\n\t\t\t\treturn (\n\t\t\t\t\t(s.imported.type === \"Identifier\" &&\n\t\t\t\t\t\ts.imported.name === importName) ||\n\t\t\t\t\t(s.imported.type === \"StringLiteral\" &&\n\t\t\t\t\t\ts.imported.value === importName)\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tfor (let statement of path.get(\"body\")) {\n\t\t\t\tif (\n\t\t\t\t\tstatement.isImportDeclaration() &&\n\t\t\t\t\tstatement.node.source.value === source &&\n\t\t\t\t\tstatement.node.specifiers.some(matchesImportName)\n\t\t\t\t) {\n\t\t\t\t\tpath.scope.registerDeclaration(statement);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn reference;\n\t\t} else {\n\t\t\t// This code originates from\n\t\t\t// https://github.com/XantreDev/preact-signals/blob/%40preact-signals/safe-react%400.6.1/packages/react/src/babel.ts#L390-L400\n\t\t\tlet reference = get(pass, `requires/${importName}`);\n\t\t\tif (reference) {\n\t\t\t\treference = types.cloneNode(reference);\n\t\t\t} else {\n\t\t\t\treference = addNamed(path, importName, source, {\n\t\t\t\t\timportedInterop: \"uncompiled\",\n\t\t\t\t});\n\t\t\t\tset(pass, `requires/${importName}`, reference);\n\t\t\t}\n\n\t\t\treturn reference;\n\t\t}\n\t};\n}\n\nfunction detectJSXAlternativeImports(\n\tpath: NodePath<BabelTypes.Program>,\n\tstate: PluginPass\n) {\n\tconst jsxIdentifierSet = new Set<string>();\n\tconst jsxObjectMap = new Map<string, string[]>();\n\n\tconst jsxPackages = {\n\t\t\"react/jsx-runtime\": [\"jsx\", \"jsxs\"],\n\t\t\"react/jsx-dev-runtime\": [\"jsxDEV\"],\n\t\treact: [\"createElement\"],\n\t};\n\n\tpath.traverse({\n\t\tImportDeclaration(importPath) {\n\t\t\tconst packageName = importPath.node.source.value;\n\t\t\tconst jsxMethods = jsxPackages[packageName as keyof typeof jsxPackages];\n\n\t\t\tif (!jsxMethods) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (const specifier of importPath.node.specifiers) {\n\t\t\t\tif (\n\t\t\t\t\tspecifier.type === \"ImportSpecifier\" &&\n\t\t\t\t\tspecifier.imported.type === \"Identifier\"\n\t\t\t\t) {\n\t\t\t\t\t// Check if this is a function we care about\n\t\t\t\t\tif (jsxMethods.includes(specifier.imported.name)) {\n\t\t\t\t\t\tjsxIdentifierSet.add(specifier.local.name);\n\t\t\t\t\t}\n\t\t\t\t} else if (specifier.type === \"ImportDefaultSpecifier\") {\n\t\t\t\t\t// Handle default imports - add to objects map for member access\n\t\t\t\t\tjsxObjectMap.set(specifier.local.name, jsxMethods);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tVariableDeclarator(varPath) {\n\t\t\tconst init = varPath.get(\"init\");\n\n\t\t\tif (init.isCallExpression()) {\n\t\t\t\tconst callee = init.get(\"callee\");\n\t\t\t\tconst args = init.get(\"arguments\");\n\n\t\t\t\tif (\n\t\t\t\t\tcallee.isIdentifier() &&\n\t\t\t\t\tcallee.node.type === \"Identifier\" &&\n\t\t\t\t\tcallee.node.name === \"require\" &&\n\t\t\t\t\targs.length > 0 &&\n\t\t\t\t\targs[0].isStringLiteral()\n\t\t\t\t) {\n\t\t\t\t\tconst packageName = args[0].node.value;\n\t\t\t\t\tconst jsxMethods =\n\t\t\t\t\t\tjsxPackages[packageName as keyof typeof jsxPackages];\n\n\t\t\t\t\tif (jsxMethods) {\n\t\t\t\t\t\tif (varPath.node.id.type === \"Identifier\") {\n\t\t\t\t\t\t\t// Handle CJS require like: const React = require(\"react\")\n\t\t\t\t\t\t\tjsxObjectMap.set(varPath.node.id.name, jsxMethods);\n\t\t\t\t\t\t} else if (varPath.node.id.type === \"ObjectPattern\") {\n\t\t\t\t\t\t\t// Handle destructured CJS require like: const { createElement } = require(\"react\")\n\t\t\t\t\t\t\tfor (const prop of varPath.node.id.properties) {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tprop.type === \"ObjectProperty\" &&\n\t\t\t\t\t\t\t\t\tprop.key.type === \"Identifier\" &&\n\t\t\t\t\t\t\t\t\tprop.value.type === \"Identifier\" &&\n\t\t\t\t\t\t\t\t\tjsxMethods.includes(prop.key.name)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tjsxIdentifierSet.add(prop.value.name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t});\n\n\tset(state, jsxIdentifiers, jsxIdentifierSet);\n\tset(state, jsxObjects, jsxObjectMap);\n}\n\nexport interface PluginOptions {\n\t/**\n\t * Specify the mode to use:\n\t * - `auto`: Automatically wrap all components that use signals.\n\t * - `manual`: Only wrap components that are annotated with `@useSignals` in a JSX comment.\n\t * - `all`: Makes all components reactive to signals.\n\t */\n\tmode?: \"auto\" | \"manual\" | \"all\";\n\t/** Specify a custom package to import the `useSignals` hook from. */\n\timportSource?: string;\n\t/**\n\t * Detect JSX elements created using alternative methods like jsx-runtime or createElement calls.\n\t * When enabled, detects patterns from react/jsx-runtime and react packages.\n\t * @default false\n\t */\n\tdetectTransformedJSX?: boolean;\n\texperimental?: {\n\t\t/**\n\t\t * If set to true the plugin will inject names into all invocations of\n\t\t *\n\t\t * - computed/useComputed\n\t\t * - signal/useSignal\n\t\t *\n\t\t * these names hook into @preact/signals-debug.\n\t\t *\n\t\t * @default false\n\t\t */\n\t\tdebug?: boolean;\n\t\t/**\n\t\t * If set to true, the component body will not be wrapped in a try/finally\n\t\t * block and instead the next component render or a microtick will stop\n\t\t * tracking signals for this component. This is an experimental feature and\n\t\t * may be removed in the future.\n\t\t * @default false\n\t\t */\n\t\tnoTryFinally?: boolean;\n\t};\n}\n\nfunction log(\n\ttransformed: boolean,\n\tpath: NodePath<FunctionLike>,\n\tfunctionName: string | null,\n\tcurrentFile: string | undefined\n) {\n\tif (!logger.transformed.enabled && !logger.skipped.enabled) return;\n\n\tlet cwd = \"\";\n\tif (typeof process !== undefined && typeof process.cwd == \"function\") {\n\t\tcwd = process.cwd().replace(/\\\\([^ ])/g, \"/$1\");\n\t\tcwd = cwd.endsWith(\"/\") ? cwd : cwd + \"/\";\n\t}\n\n\tconst relativePath = currentFile?.replace(cwd, \"\") ?? \"\";\n\tconst lineNum = path.node.loc?.start.line;\n\tfunctionName = functionName ?? \"<anonymous>\";\n\n\tif (transformed) {\n\t\tlogger.transformed(`${functionName} (${relativePath}:${lineNum})`);\n\t} else {\n\t\tlogger.skipped(`${functionName} (${relativePath}:${lineNum}) %o`, {\n\t\t\thasSignals: getData(path.scope, maybeUsesSignal) ?? false,\n\t\t\thasJSX: getData(path.scope, containsJSX) ?? false,\n\t\t});\n\t}\n}\n\nfunction isComponentLike(\n\tpath: NodePath<FunctionLike>,\n\tfunctionName: string | null\n): boolean {\n\treturn !getData(path, alreadyTransformed) && isComponentName(functionName);\n}\n\nexport default function signalsTransform(\n\t{ types: t }: PluginArgs,\n\toptions: PluginOptions\n): PluginObj {\n\t// TODO: Consider alternate implementation, where on enter of a function\n\t// expression, we run our own manual scan the AST to determine if the\n\t// function uses signals and is a component. This manual scan once upon\n\t// seeing a function would probably be faster than running an entire\n\t// babel pass with plugins on components twice.\n\tconst visitFunction: VisitNodeObject<PluginPass, FunctionLike> = {\n\t\texit(path, state) {\n\t\t\tif (getData(path, alreadyTransformed) === true) return false;\n\n\t\t\tlet functionName = getFunctionName(path);\n\t\t\tif (functionName === DefaultExportSymbol) {\n\t\t\t\tfunctionName = basename(this.filename) ?? null;\n\t\t\t}\n\n\t\t\tif (shouldTransform(path, functionName, state.opts)) {\n\t\t\t\ttransformFunction(\n\t\t\t\t\tt,\n\t\t\t\t\tstate.opts,\n\t\t\t\t\tpath,\n\t\t\t\t\tfunctionName,\n\t\t\t\t\tstate,\n\t\t\t\t\tthis.filename || \"\"\n\t\t\t\t);\n\t\t\t\tlog(true, path, functionName, this.filename);\n\t\t\t} else if (isComponentLike(path, functionName)) {\n\t\t\t\tlog(false, path, functionName, this.filename);\n\t\t\t}\n\t\t},\n\t};\n\n\treturn {\n\t\tname: \"@preact/signals-transform\",\n\t\tvisitor: {\n\t\t\tProgram: {\n\t\t\t\tenter(path, state) {\n\t\t\t\t\t// Following the pattern of babel-plugin-transform-react-jsx, we\n\t\t\t\t\t// lazily create the import statement for the useSignalTracking hook.\n\t\t\t\t\t// We create a function and store it in the PluginPass object, so that\n\t\t\t\t\t// on the first usage of the hook, we can create the import statement.\n\t\t\t\t\tset(\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\tgetHookIdentifier,\n\t\t\t\t\t\tcreateImportLazily(\n\t\t\t\t\t\t\tt,\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\tpath,\n\t\t\t\t\t\t\timportName,\n\t\t\t\t\t\t\toptions.importSource ?? defaultImportSource\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\n\t\t\t\t\tif (options.detectTransformedJSX) {\n\t\t\t\t\t\tdetectJSXAlternativeImports(path, state);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\n\t\t\tArrowFunctionExpression: visitFunction,\n\t\t\tFunctionExpression: visitFunction,\n\t\t\tFunctionDeclaration: visitFunction,\n\t\t\tObjectMethod: visitFunction,\n\n\t\t\tCallExpression(path, state) {\n\t\t\t\tif (options.detectTransformedJSX) {\n\t\t\t\t\tif (isJSXAlternativeCall(path, state)) {\n\t\t\t\t\t\tsetOnFunctionScope(path, containsJSX, true, this.filename);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Handle signal naming\n\t\t\t\tif (options.experimental?.debug && isSignalCall(path)) {\n\t\t\t\t\tconst args = path.get(\"arguments\");\n\n\t\t\t\t\t// Only inject name if it doesn't already have one\n\t\t\t\t\tif (!hasNameInOptions(t, args)) {\n\t\t\t\t\t\tconst variableName = getVariableNameFromDeclarator(path);\n\t\t\t\t\t\tif (variableName) {\n\t\t\t\t\t\t\tinjectSignalName(t, path, variableName, this.filename);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tMemberExpression(path) {\n\t\t\t\tif (isValueMemberExpression(path)) {\n\t\t\t\t\tsetOnFunctionScope(path, maybeUsesSignal, true, this.filename);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tObjectPattern(path) {\n\t\t\t\tif (hasValuePropertyInPattern(path.node)) {\n\t\t\t\t\tsetOnFunctionScope(path, maybeUsesSignal, true, this.filename);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tJSXElement(path) {\n\t\t\t\tsetOnFunctionScope(path, containsJSX, true, this.filename);\n\t\t\t},\n\t\t\tJSXFragment(path) {\n\t\t\t\tsetOnFunctionScope(path, containsJSX, true, this.filename);\n\t\t\t},\n\t\t},\n\t};\n}\n"],"names":["optOutCommentIdentifier","optInCommentIdentifier","dataNamespace","defaultImportSource","importName","getHookIdentifier","maybeUsesSignal","containsJSX","alreadyTransformed","jsxIdentifiers","jsxObjects","UNMANAGED","MANAGED_COMPONENT","MANAGED_HOOK","logger","transformed","debug","skipped","get","pass","name","set","v","setData","node","value","getData","getComponentFunctionDeclaration","path","filename","prev","functionScope","scope","getFunctionParent","parent","functionName","getFunctionName","DefaultExportSymbol","isComponentFunction","type","callee","startsWith","toUpperCase","setOnFunctionScope","key","basename","split","pop","Symbol","getObjectPropertyKey","getFunctionNodeName","id","getFunctionNameFromParent","parentPath","left","property","nodeName","isComponentName","match","isCustomHookName","hasLeadingComment","comment","_comments$some","comments","leadingComments","some","c","hasLeadingOptInComment","hasLeadingOptOutComment","isOptedIntoSignalTracking","isOptedOutOfSignalTracking","shouldTransform","options","mode","isValueMemberExpression","isJSXAlternativeCall","state","jsxIdentifierSet","jsxObjectMap","isIdentifier","_jsxIdentifierSet$has","has","isMemberExpression","object","_allowedMethods$inclu","objectName","methodName","allowedMethods","includes","isSignalCall","getVariableNameFromDeclarator","currentPath","isVariableDeclarator","hasNameInOptions","t","args","length","optionsArg","isObjectExpression","properties","prop","isObjectProperty","computed","isStringLiteral","injectSignalName","variableName","nameValue","_path$node$loc","baseName","lineNumber","loc","start","line","stringLiteral","nameOption","objectExpression","objectProperty","identifier","arguments","push","replaceWith","hasValuePropertyInPattern","pattern","BabelTypes","tryCatchTemplate","template","statements","_t","_","debugTryCatchTemplate","placeholderWhitelist","Set","placeholderPattern","wrapInTryFinally","hookUsage","componentName","isDebug","stopTrackingIdentifier","generateUidIdentifier","COMPONENT_NAME","STORE_IDENTIFIER","HOOK_IDENTIFIER","HOOK_USAGE","BODY","isBlockStatement","body","returnStatement","blockStatement","prependUseSignals","expressionStatement","callExpression","transformFunction","_options$experimental","isHook","isComponent","experimental","noTryFinally","newBody","_options$experimental2","createImportLazily","types","source","isModule","reference","cloneNode","addNamed","importedInterop","importPosition","matchesImportName","s","imported","statement","isImportDeclaration","specifiers","registerDeclaration","detectJSXAlternativeImports","Map","jsxPackages","react","traverse","ImportDeclaration","importPath","packageName","jsxMethods","specifier","add","local","VariableDeclarator","varPath","init","isCallExpression","log","currentFile","_currentFile$replace","_path$node$loc2","enabled","cwd","process","undefined","replace","endsWith","relativePath","lineNum","_getData","_getData2","hasSignals","hasJSX","isComponentLike","signalsTransform","visitFunction","exit","_basename","opts","visitor","Program","enter","_options$importSource","importSource","detectTransformedJSX","ArrowFunctionExpression","FunctionExpression","FunctionDeclaration","ObjectMethod","CallExpression","_options$experimental3","MemberExpression","ObjectPattern","JSXElement","JSXFragment"],"mappings":"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"}
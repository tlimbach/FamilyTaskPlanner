import{Signal as t,signal as n,computed as e,effect as o}from"@preact/signals-core";import{version as i,useRef as r,useMemo as f,useEffect as s,useLayoutEffect as u}from"react";import{useSyncExternalStore as c}from"use-sync-external-store/shim/index.js";const[l]=i.split(".").map(Number),a=[],d=Symbol.for(l>=19?"react.transitional.element":"react.element");function p(n){if("function"!=typeof n)return n;else return function(e,o,...i){if("string"==typeof e&&o)for(let n in o){let e=o[n];if("children"!==n&&e instanceof t)o[n]=e.value}return n.call(n,e,o,...i)}}const m=Symbol.dispose||Symbol.for("Symbol.dispose");let b;function y(t,n){const e=n.effect.S();b=n;return g.bind(n,t,e)}function g(t,n){n();b=t}const h=()=>{},v={o:0,effect:{s:void 0,c(){},S:()=>h,d(){}},subscribe:()=>h,getSnapshot:()=>0,S(){},f(){},[m](){}},_=Promise.prototype.then.bind(Promise.resolve());let S;function w(){if(!S)S=_(x)}function x(){var t;S=void 0;null==(t=b)||t.f()}const j="undefined"!=typeof window?u:s;function P(t=0){w();const n=r();if(null==n.current)if("undefined"==typeof window)n.current=v;else n.current=function(t){let n,e,i,r=0,f=o(function(){n=this});n.c=function(){r=r+1|0;if(i)i()};return{o:t,effect:n,subscribe(t){i=t;return function(){r=r+1|0;i=void 0;f()}},getSnapshot:()=>r,S(){if(null==b){e=y(void 0,this);return}const t=b.o,n=this.o;if(0==t&&0==n||0==t&&1==n){b.f();e=y(void 0,this)}else if(1==t&&0==n||2==t&&0==n);else e=y(b,this)},f(){const t=e;e=void 0;null==t||t()},[m](){this.f()}}}(t);const e=n.current;c(e.subscribe,e.getSnapshot,e.getSnapshot);e.S();if(0===t)j(x);return e}Object.defineProperties(t.prototype,{$$typeof:{configurable:!0,value:d},type:{configurable:!0,value:function({data:t}){const n=P(1);try{return t.value}finally{n.f()}}},props:{configurable:!0,get(){return{data:this}}},ref:{configurable:!0,value:null}});function $(t){return P(t)}function useSignal(t,e){return f(()=>n(t,e),a)}function useComputed(t,n){const o=r(t);o.current=t;return f(()=>e(()=>o.current(),n),a)}function useSignalEffect(t,n){const e=r(t);e.current=t;s(()=>o(function(){return e.current()},n),a)}export{P as _useSignalsImplementation,w as ensureFinalCleanup,useComputed,useSignal,useSignalEffect,$ as useSignals,p as wrapJsx};//# sourceMappingURL=runtime.mjs.map

import{Signal as n,signal as t,computed as r,effect as i}from"@preact/signals-core";import{version as e,useRef as o,useMemo as u,useEffect as f,useLayoutEffect as c}from"react";import{useSyncExternalStore as a}from"use-sync-external-store/shim/index.js";var s=e.split(".").map(Number)[0],l=[],v=Symbol.for(s>=19?"react.transitional.element":"react.element");function d(t){if("function"!=typeof t)return t;else return function(r,i){if("string"==typeof r&&i)for(var e in i){var o=i[e];if("children"!==e&&o instanceof n)i[e]=o.value}return t.call.apply(t,[t,r,i].concat([].slice.call(arguments,2)))}}var p,m=Symbol.dispose||Symbol.for("Symbol.dispose");function b(n,t){var r=t.effect.S();p=t;return y.bind(t,n,r)}function y(n,t){t();p=n}var g,h,_=function(){},S=((g={o:0,effect:{s:void 0,c:function(){},S:function(){return _},d:function(){}},subscribe:function(){return _},getSnapshot:function(){return 0},S:function(){},f:function(){}})[m]=function(){},g),w=Promise.prototype.then.bind(Promise.resolve());function x(){if(!h)h=w(j)}function j(){var n;h=void 0;null==(n=p)||n.f()}var P="undefined"!=typeof window?c:f;function $(n){if(void 0===n)n=0;x();var t=o();if(null==t.current)if("undefined"==typeof window)t.current=S;else t.current=function(n){var t,r,e,o,u=0,f=i(function(){r=this});r.c=function(){u=u+1|0;if(o)o()};return(t={o:n,effect:r,subscribe:function(n){o=n;return function(){u=u+1|0;o=void 0;f()}},getSnapshot:function(){return u},S:function(){if(null!=p){var n=p.o,t=this.o;if(0==n&&0==t||0==n&&1==t){p.f();e=b(void 0,this)}else if(1==n&&0==t||2==n&&0==t);else e=b(p,this)}else e=b(void 0,this)},f:function(){var n=e;e=void 0;null==n||n()}})[m]=function(){this.f()},t}(n);var r=t.current;a(r.subscribe,r.getSnapshot,r.getSnapshot);r.S();if(0===n)P(j);return r}Object.defineProperties(n.prototype,{$$typeof:{configurable:!0,value:v},type:{configurable:!0,value:function(n){var t=n.data,r=$(1);try{return t.value}finally{r.f()}}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});function k(n){return $(n)}function useSignal(n,r){return u(function(){return t(n,r)},l)}function useComputed(n,t){var i=o(n);i.current=n;return u(function(){return r(function(){return i.current()},t)},l)}function useSignalEffect(n,t){var r=o(n);r.current=n;f(function(){return i(function(){return r.current()},t)},l)}export{$ as _useSignalsImplementation,x as ensureFinalCleanup,useComputed,useSignal,useSignalEffect,k as useSignals,d as wrapJsx};//# sourceMappingURL=runtime.module.js.map
